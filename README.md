# Metal-wire-tracking-car-basic-mspm0g3507

该项目为基于 mspm0g3507 的金属丝循迹小车。

文件配置教程可参考嘉立创天猛星开发板教程：
https://wiki.lckfb.com/zh-hans/tmx-mspm0g3507/keil-beginner/

小车将利用舵机转向，两个后轮驱动前进，转向和前进使用开环控制，因为速度很慢，对速度控制的要求不高。

传感器安装于车头并且尽可能靠近地面，经过测试，空地检测到的数据为23.7k左右，金属丝位于其正下方时检测到的数据约为26.0k，但实际中由于地面金属丝凹凸不平，在其最贴近时将有30k左右的数据。

小车舵机控制算法为：

1.舵机每隔35ms进行一次转向；
2.传感器数据小于24k时，增加1个角度；
3.传感器数据大于24k时，减少1个角度；
4.这样舵机将会沿着铁丝左侧前进。

硬币检测：当值大于30k且保持了一段时间，则控制蜂鸣器发出响声。

需要调节的参数：

1.传感器阈值。阈值应当处于空地上最大值和铁丝位于正下方时的最小值之间。在此基础上越大，则小车行径越靠近铁丝，当然也越容易跃到铁丝右侧导致失控；
2.舵机响应间隔时间。间隔时间太小太大都容易失控，需要配合传感器读取时间给值；
3.舵机最大最小限制角度。应该保证小车贴着铁丝过弯；
4.左右轮速度值。从小一点开始给，若能顺利过，则逐渐增大其值；
5.硬币检测阈值和判断时间。

有几点问题：

1.传感器有时候读不出数据，应该是ldc1000的线圈和电路并未分离，在舵机转动时，牵扯到其线材，导致信号传输问题。应该将其分离；
2.若硬币在赛道内侧则有大概率无法检测到，因为小车算法是在赛道左侧行驶；
3.显示屏有时候小概率会卡死，原因不清楚；
4.由于并未使用pid算法控制速度，所以速度在转弯时和前进时会有所不同。

